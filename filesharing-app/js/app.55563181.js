(function(){var e={82333:function(e,a,n){"use strict";var i=n(49242),t=n(73396),l=n(44870);const o={class:"row g-5"},s=(0,t._)("div",{class:"col"},[(0,t._)("div",{class:"p-3 border bg-light"},[(0,t._)("div",{class:"display-3 text-center"},"CS633 Multi-Week Assignment")])],-1),r=[s];function u(e,a){return(0,t.wg)(),(0,t.iD)("div",o,r)}var d=n(40089);const c={},m=(0,d.Z)(c,[["render",u]]);var f=m,p=n(87139);const g={class:"row g-5 menubar"},_={class:"col"},v={clss:"d-flex"},b={class:"p-2 text-end"},h=(0,t.Uk)("Log In as UserID: ");function y(e,a,n,i,l,o){return(0,t.wg)(),(0,t.iD)("div",g,[(0,t._)("div",_,[(0,t._)("div",v,[(0,t._)("div",b,[(0,t._)("span",null,[h,(0,t._)("strong",null,(0,p.zw)(n.msg),1)]),(0,t._)("button",{type:"button",class:"btn btn-outline-dark",onClick:a[0]||(a[0]=(...e)=>o.onSignout&&o.onSignout(...e))},"Sign Out")])])])])}var S={name:"MenuBar",props:{msg:String},methods:{onSignout(){this.$emit("signout")}}};const w=(0,d.Z)(S,[["render",y],["__scopeId","data-v-1ee2f83a"]]);var E=w;const O=e=>((0,t.dD)("data-v-1a9962d2"),e=e(),(0,t.Cn)(),e),N={class:"row g-5 body-container"},I={class:"col-md body-content border justify-content-center"},L={id:"fileGroup"},T=O((()=>(0,t._)("span",{class:"form-label"}," File to Share ",-1))),k={class:"form-alert"},C={id:"emailGroup"},F=O((()=>(0,t._)("span",{class:"form-label"},"Send Address",-1))),R={class:"form-alert"},M={class:"form-floating mb-3"},P=O((()=>(0,t._)("label",null,"Email address",-1))),A={class:"form-alert"},B={class:"form-floating mb-3"},D=O((()=>(0,t._)("label",null,"Email address",-1))),x={class:"form-alert"},j={class:"form-floating mb-3"},K=O((()=>(0,t._)("label",null,"Email address",-1))),U={class:"form-alert"},W={class:"form-floating mb-3"},q=O((()=>(0,t._)("label",null,"Email address",-1))),J={class:"form-alert"},V={class:"form-floating mb-3"},Z=O((()=>(0,t._)("label",null,"Email address",-1))),H={class:"form-alert"},Y={class:"d-grid gap-2 mt-3 mb-3"};function z(e,a,n,l,o,s){return(0,t.wg)(),(0,t.iD)("div",N,[(0,t._)("div",I,[(0,t._)("form",null,[(0,t._)("div",null,[(0,t._)("div",L,[T,(0,t.wy)((0,t._)("span",k," Please CHOOSE the FILE to share! ",512),[[i.F8,!o.validations.file]]),(0,t._)("input",{class:"form-control",type:"file",id:"formFile",onChange:a[0]||(a[0]=e=>s.handleFileChange(e)),required:""},null,32)])]),(0,t._)("div",null,[(0,t._)("div",C,[F,(0,t.wy)((0,t._)("span",R," Please ENTER at least ONE EMAIL address! ",512),[[i.F8,!o.validations.notEmpty]]),(0,t._)("div",M,[(0,t.wy)((0,t._)("input",{type:"email",class:"form-control",id:"email1",ref:"email1","onUpdate:modelValue":a[1]||(a[1]=e=>o.email1=e),onBlur:a[2]||(a[2]=e=>s.validateEmail(e))},null,544),[[i.nr,o.email1]]),P,(0,t.wy)((0,t._)("span",A," Please ENTER the CORRECT form of EMAIL address! ",512),[[i.F8,!o.validations.email1]])]),(0,t._)("div",B,[(0,t.wy)((0,t._)("input",{type:"email",class:"form-control",id:"email2",ref:"email2","onUpdate:modelValue":a[3]||(a[3]=e=>o.email2=e),onBlur:a[4]||(a[4]=e=>s.validateEmail(e))},null,544),[[i.nr,o.email2]]),D,(0,t.wy)((0,t._)("span",x," Please ENTER the CORRECT form of EMAIL address! ",512),[[i.F8,!o.validations.email2]])]),(0,t._)("div",j,[(0,t.wy)((0,t._)("input",{type:"email",class:"form-control",id:"email3",ref:"email3","onUpdate:modelValue":a[5]||(a[5]=e=>o.email3=e),onBlur:a[6]||(a[6]=e=>s.validateEmail(e))},null,544),[[i.nr,o.email3]]),K,(0,t.wy)((0,t._)("span",U," Please ENTER the CORRECT form of EMAIL address! ",512),[[i.F8,!o.validations.email3]])]),(0,t._)("div",W,[(0,t.wy)((0,t._)("input",{type:"email",class:"form-control",id:"email4",ref:"email4","onUpdate:modelValue":a[7]||(a[7]=e=>o.email4=e),onBlur:a[8]||(a[8]=e=>s.validateEmail(e))},null,544),[[i.nr,o.email4]]),q,(0,t.wy)((0,t._)("span",J," Please ENTER the CORRECT form of EMAIL address! ",512),[[i.F8,!o.validations.email4]])]),(0,t._)("div",V,[(0,t.wy)((0,t._)("input",{type:"email",class:"form-control",id:"email5",ref:"email5","onUpdate:modelValue":a[9]||(a[9]=e=>o.email5=e),onBlur:a[10]||(a[10]=e=>s.validateEmail(e))},null,544),[[i.nr,o.email5]]),Z,(0,t.wy)((0,t._)("span",H," Please ENTER the CORRECT form of EMAIL address! ",512),[[i.F8,!o.validations.email5]])])])]),(0,t._)("div",null,[(0,t._)("div",Y,[(0,t._)("button",{type:"button",class:"btn btn-outline-primary btn-lg",onClick:a[11]||(a[11]=(...e)=>s.onSubmit&&s.onSubmit(...e))}," Submit ")])])])])])}var $=n(24840),G=n.n($);const Q="AKIA6IC4FYYRIV5Z5YDW",X="YtKmrrwTgqiYhHiIuPJaxmJste+Eb1bXd8SPo3xR",ee="fileuploadcs633",ae="us-east-2",ne="us-east-2:c7a23de6-8f5a-44c6-b837-c9c7e8e563b8",ie="cs633Table",te="arn:aws:sns:us-east-2:979445859874:cs633sns",le="checkSubscription",oe="sendEmail";G().config.update({region:ae,credentials:new(G().CognitoIdentityCredentials)({IdentityPoolId:ne})});const se=new(G().Lambda)({region:ae,accessKeyId:Q,secretAccessKey:X}),re={BucketName:ee,Region:ae,IdentityPoolId:ne,DynamoDBTable:ie,SNSArn:te,Lambda:se,LambdaCheckFunction:le,LambdaSendFunction:oe};var ue=re,de={name:"MainBody",data(){return{file:null,regExp:/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,email1:"",email2:"",email3:"",email4:"",email5:"",emailList:[],validations:{file:!0,email1:!0,email2:!0,email3:!0,email4:!0,email5:!0,notEmpty:!0}}},methods:{validateSubscription(e){let a={ARN:ue.SNSArn,Email:e};ue.Lambda.invoke({FunctionName:ue.LambdaCheckFunction,InvocationType:"RequestResponse",LogType:"None",Payload:JSON.stringify(a)},(function(e,a){if(e)console.log(e),alert("There was an error when checking the email!"),location.reload();else{let e=JSON.parse(a.Payload);"Unsubscribed"===e.status?alert("[Warning] This email("+e.email+") needs to be subscribed!"):"Pending"===e.status&&alert("[Warning] This email("+e.email+") needs to be confirmed from the owner!")}}))},validateEmail(e){let a=e.target.value.trim(),n=e.target.id;this.validations[n]=!0,""!==a&&(this.regExp.test(a)?this.validateSubscription(a):(this.validations[n]=!1,this[n]="",this.$refs[n].focus()))},checkInput(){this.validations["file"]=!0,this.validations["notEmpty"]=!0;let e=0;null===this.file&&(this.validations["file"]=!1,e++);for(let i=1;i<=5;i++){var a="email"+i,n=this[a];""!==n&&this.emailList.push(n)}return 0==this.emailList.length&&(this.validations["notEmpty"]=!1,e++),e},onSubmit(){let e=this.checkInput();if(e>0)alert("Please CHECK the FORM!");else{const{file:e,emailList:a}=this;this.$emit("submit",{file:e,emailList:a}),this.file=null,this.emailList=[]}},handleFileChange(e){this.file=e.target.files[0]}}};const ce=(0,d.Z)(de,[["render",z],["__scopeId","data-v-1a9962d2"]]);var me=ce;const fe={class:"row g-5"},pe=(0,t._)("div",{class:"col"},[(0,t._)("div",{class:"p-2 border bg-light"},[(0,t._)("h5",{class:"text-end"},"Haeun Suh BlazerId: hsuh Email: hsuh@uab.edu")])],-1),ge=[pe];function _e(e,a){return(0,t.wg)(),(0,t.iD)("div",fe,ge)}const ve={},be=(0,d.Z)(ve,[["render",_e]]);var he=be,ye=n(87968);const Se={id:"app",class:"container"},we=["value"],Ee={name:"App",components:{Authenticator:ye._F,MainHeader:f,MenuBar:E,MainBody:me,MainFooter:he},methods:{onSubmit(e){let{file:a,emailList:n}=e,i=a.name,t=new(G().S3.ManagedUpload)({params:{Bucket:ue.BucketName,Key:i,Body:a}}),l=t.promise();l.then((function(e){let t={ETag:{S:e.ETag},uploader:{S:document.querySelector("#userName").value},uploadBucket:{S:e.Bucket},uploadLocation:{S:e.Location},uploadKey:{S:e.key},uploadedDate:{S:JSON.stringify(new Date)},fileName:{S:i},size:{S:a.size+" KB"},sharedMailAddresses:{S:n.join(", ")},modifiedDate:{S:JSON.stringify(a.lastModifiedDate)}},l={S3:{Bucket:ue.BucketName,Key:i},SNS:{Emaillist:n,ARN:ue.SNSArn}};ue.Lambda.invoke({FunctionName:ue.LambdaSendFunction,InvocationType:"RequestResponse",LogType:"None",Payload:JSON.stringify(l)},(function(e,a){if(e)console.log(e);else{let e=JSON.parse(a.Payload);alert(e.msg),0!=e.result&&(t["sharedMailAddresses"]={S:"N/A"}),new(G().DynamoDB)({apiVersion:"2012-08-10"}).putItem({TableName:ue.DynamoDBTable,Item:t},(function(e,a){e?console.log("Error",e):(console.log("Success",a),alert("Successfully uploaded file."),location.reload())}))}}))}),(function(e){console.log(e)}))}}};var Oe=Object.assign(Ee,{setup(e){return(e,a)=>((0,t.wg)(),(0,t.iD)("div",Se,[(0,t.Wm)(f),(0,t.Wm)((0,l.SU)(ye._F),null,{default:(0,t.w5)((({user:a,signOut:n})=>[(0,t._)("input",{type:"hidden",id:"userName",value:a.username},null,8,we),(0,t.Wm)(E,{msg:a.username,onSignout:n},null,8,["msg","onSignout"]),(0,t.Wm)(me,{onSubmit:e.onSubmit},null,8,["onSubmit"])])),_:1}),(0,t.Wm)(he)]))}});const Ne=Oe;var Ie=Ne,Le=n(87429),Te=n(61961);const ke={aws_project_region:"us-east-2",aws_cognito_identity_pool_id:"us-east-2:2e23b111-8172-4fab-abce-eff2bcace462",aws_cognito_region:"us-east-2",aws_user_pools_id:"us-east-2_RFgt05tKQ",aws_user_pools_web_client_id:"304mac9tnteh4lqle2kbbrkq5q",oauth:{},aws_cognito_username_attributes:[],aws_cognito_social_providers:[],aws_cognito_signup_attributes:["EMAIL"],aws_cognito_mfa_configuration:"OFF",aws_cognito_mfa_types:["SMS"],aws_cognito_password_protection_settings:{passwordPolicyMinLength:8,passwordPolicyCharacters:[]},aws_cognito_verification_mechanisms:["EMAIL"]};var Ce=ke;n(38937);Le.dQ.configure(Ce);const Fe=(0,i.ri)(Ie);Fe.use(ye.ZP),Fe.use(Te.g),Fe.mount("#app")},56249:function(){},28022:function(){},42480:function(){}},a={};function n(i){var t=a[i];if(void 0!==t)return t.exports;var l=a[i]={id:i,loaded:!1,exports:{}};return e[i].call(l.exports,l,l.exports,n),l.loaded=!0,l.exports}n.m=e,function(){var e=[];n.O=function(a,i,t,l){if(!i){var o=1/0;for(d=0;d<e.length;d++){i=e[d][0],t=e[d][1],l=e[d][2];for(var s=!0,r=0;r<i.length;r++)(!1&l||o>=l)&&Object.keys(n.O).every((function(e){return n.O[e](i[r])}))?i.splice(r--,1):(s=!1,l<o&&(o=l));if(s){e.splice(d--,1);var u=t();void 0!==u&&(a=u)}}return a}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[i,t,l]}}(),function(){n.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(a,{a:a}),a}}(),function(){n.d=function(e,a){for(var i in a)n.o(a,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(a){return 0===e[a]};var a=function(a,i){var t,l,o=i[0],s=i[1],r=i[2],u=0;if(o.some((function(a){return 0!==e[a]}))){for(t in s)n.o(s,t)&&(n.m[t]=s[t]);if(r)var d=r(n)}for(a&&a(i);u<o.length;u++)l=o[u],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(d)},i=self["webpackChunkfilesharing_app"]=self["webpackChunkfilesharing_app"]||[];i.forEach(a.bind(null,0)),i.push=a.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(82333)}));i=n.O(i)})();
//# sourceMappingURL=app.55563181.js.map